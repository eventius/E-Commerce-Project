@page
@model CategoryEntryModel
@{

}
@section title {
    Category Entry
}

<form id="myForm" method="post">
    <input type="hidden" id="hdnIsAdd" value="@(Model.IsAdd ? 1 : 0)" />
    <input type="hidden" id="hdnID" value="@Model.ID" />
    <table>
        <tr>
            <td>Category Name </td>
            <td>@Html.TextBox("txtCategoryName", Model.ProductCategory.CategoryName,"", new { style="width:100p%"})</td>
        </tr>
        <tr>
            <td>Category Code </td>
            <td>@Html.TextBox("txtCategoryCode", Model.ProductCategory.CategoryCode,"", new { style="width:100p%"})</td>
        </tr>
        <tr>
            <td></td>
            <td><select id="IsDelete">
                <option value=False>Input record</option>
                <option value=True>Delete Record</option>
            </select></td>
        </tr>
    </table>

    <input type="button" id="btnSave" value="save" />
</form>
@section scripts{
        <script type="text/javascript">
        $(function () {
            $('#btnSave').click(function () {
                var data = { hdnID: $('#hdnID').val(), IsAdd: $('#hdnIsAdd').val(), CategoryName: $('#txtCategoryName').val(), CategoryCode: $('#txtCategoryCode').val(), IsDeleted: $('#IsDelete').val()};
                $.ajax({
                    headers: {
                        "Access-Control-Allow-Origin": '*'
                    },
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader("XSRF-TOKEN",
                            $('input:hidden[name="__RequestVerificationToken"]').val());
                    },
                    crossDomain: true,
                    url: '@Url.Content("~")@Request.Path' + "?handler=SaveData",
                    data: JSON.stringify(data),
                    type: "POST",
                    datatype: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function (response) {
                        console.log(response);
                        if (response.result) {
                            alert('Save Success')
                            document.location.href = "_ProductCategory";
                        }
                        else
                            alert("Save Failed")
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(XMLHttpRequest.status);
                    }
                });
            });
        });
    </script>
}
